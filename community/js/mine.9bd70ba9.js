(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mine"],{"6d5b":function(t,e,a){"use strict";var n=a("c211"),s=a.n(n);s.a},b5b1:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"mine"},[a("div",{staticClass:"header"},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:t.avatar}})]),a("div",{staticClass:"name-card"},[a("span",{staticClass:"name"},[t._v(t._s(t.userInfo.username))]),a("span",{staticClass:"desc",on:{click:t.openIntroductionEdit}},[t._v(t._s(t.userInfo.intro)),"me"===t.accountType?a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#iconedit"}})]):t._e()])]),a("div",{staticClass:"btn-box"},["me"===t.accountType?a("button",{staticClass:"edit",on:{click:function(e){return t.goto("/profile")}}},[t._v("编辑资料")]):a("button",{staticClass:"appoint"},[t._v("+ 关注")])])]),a("div",{staticClass:"flex header-footer"},[a("div",{staticClass:"data-board"},[a("div",{staticClass:"item",on:{click:function(e){return t.goto("/message?type=msg&subType=awesome")}}},[a("span",{staticClass:"name"},[t._v("点赞")]),a("span",{staticClass:"data"},[t._v(t._s(t.userInfo.all_likes_count))])]),a("div",{staticClass:"item",on:{click:function(e){return t.goto("/message?type=msg&subType=fans")}}},[a("span",{staticClass:"name"},[t._v("粉丝")]),a("span",{staticClass:"data"},[t._v(t._s(t.userInfo.followers_count))])])]),a("button",{staticClass:"logout",on:{click:t.logout}},[t._v("退出登录")])]),a("TabBar",{attrs:{type:t.type,dynamicCount:t.dynamicCount,msgCount:t.msgCount},on:{"update:type":function(e){t.type=e},bindTab:t.bindTab}}),a("div",{staticClass:"card-list"},[(t.type,t._l(t.cardList,(function(e,n){return a("MsgCard",{key:n,attrs:{type:t.type,subType:e.subType,content:e},on:{"update:type":function(e){t.type=e},"update:subType":function(a){return t.$set(e,"subType",a)},"update:sub-type":function(a){return t.$set(e,"subType",a)}}})})))],2),a("div",{ref:"editDialog",staticClass:"editDialog"},[a("div",{staticClass:"title-box"},[a("div",{staticClass:"cancle",on:{click:function(e){return t.handleConfirm(!1)}}},[t._v("取消")]),a("div",{staticClass:"title"},[t._v("个人简介")]),a("div",{staticClass:"confirm",on:{click:function(e){return t.handleConfirm(!0)}}},[t._v("保存")])]),a("div",{staticClass:"input-box"},[a("van-field",{attrs:{type:"textarea",placeholder:"填写个人简介更容易获得别人的关注哦…"},model:{value:t.tempObj.intro,callback:function(e){t.$set(t.tempObj,"intro",e)},expression:"tempObj.intro"}})],1)]),a("div",{staticClass:"footer-pad"})],1)},s=[],i=(a("8e6e"),a("cadf"),a("456d"),a("ac6a"),a("ade3")),o=a("2f62"),r=a("fab29"),c=a("ca00");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var l={name:"mine",data:function(){return{loading:!1,finished:!1,accountType:"me",type:"dynamic",intro:"",showIntroductionPop:!1,tempObj:{},cardList:[],dynamicCount:0,msgCount:0}},computed:d(d({},Object(o["b"])(["userInfo"])),{},{avatar:function(){return this.userInfo.avatar?this.userInfo.avatar:c["a"].defaultAvatar()}}),mounted:function(){this.getPosts("dynamic"),this.getPosts("participate",!1)},methods:{onLoad:function(t){this.getPosts(this.type)},goto:function(t){this.$router.push(t)},getPosts:function(t,e){var a=this;switch(t){case"dynamic":Object(r["a"])({page:1}).then((function(t){200===t.code&&t.data.length&&(t.data.forEach((function(t){t.subType="review",t.user.name=t.user.username,t.user.avatar=c["a"].defaultAvatar(t.user.avatar),t.thumb_pic=c["a"].getFirstImg(t.content),t.thumb_video=c["a"].getFirstVideo(t.content)})),a.cardList=t.data,a.dynamicCount=t.total),a.finished=!0}));break;default:Object(r["c"])({page:1}).then((function(t){200===t.code&&t.data.length>0&&(t.data.forEach((function(t){switch(t.related_type){case"likes":t.title=t.related.likable&&t.related.likable.title,t.content=t.related.likable,t.subType="awesome";break;case"comments":t.title=t.related.post&&t.related.post.title,t.content=t.related.content,t.subType="review";break;default:break}t.user={avatar:a.$state.userInfo.avatar,name:a.$state.userInfo.username},t.user.avatar=c["a"].defaultAvatar(t.user.avatar),t.thumb_pic=c["a"].getFirstImg(t.content),t.thumb_video=c["a"].getFirstVideo(t.content)})),e&&(a.cardList=t.data),a.msgCount=t.total),a.finished=!0})),this.cardList=[];break}},bindTab:function(t){this.finished=!1,this.type=t,this.cardList=[],this.getPosts(t,!0)},logout:function(){this.$router.push("/login")},openIntroductionEdit:function(){this.tempObj.intro=this.userInfo.intro,this.showIntroductionPop=!0},handleConfirm:function(t){var e=this;this.showIntroductionPop=!1,t?(this.tempObj={username:this.userInfo.username,avatar:this.userInfo.avatar,intro:this.userInfo.intro,birthday:this.userInfo.birthday,gender:this.userInfo.gender},Object(r["d"])(this.tempObj).then((function(t){200===t.code?e.$toast("修改简介成功"):e.$toast(t.msg)}))):this.tempObj.intro=""}},components:{TabBar:function(){return a.e("chunk-67e0b230").then(a.bind(null,"cc3e"))},MsgCard:function(){return a.e("chunk-6d93d226").then(a.bind(null,"830a"))}}},p=l,f=(a("6d5b"),a("2877")),b=Object(f["a"])(p,n,s,!1,null,"6f652a5a",null);e["default"]=b.exports},c211:function(t,e,a){}}]);